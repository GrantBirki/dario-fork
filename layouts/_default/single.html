<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ .Title }}</title>
    <meta property="og:title" content="{{ .Title }}" />
    <meta property="og:description" content="{{ .Params.description }}" />
    <meta property="og:url" content="{{ .Permalink }}" />
    <meta property="og:image" content="{{ .Site.Params.ogImage }}" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="author" content="{{ .Site.Params.author }}" />
    <meta name="description" content="{{ .Params.description }}" />

    <style>
        html {
            visibility: hidden;
        }

        html.js-loaded {
            visibility: visible;
        }

        header h1 a {
            display: block;
            width: 140px;
            font-family: Newsreader, serif;
        }
    </style>

    <link rel="preload" href="{{ "fonts/Newsreader.woff2" | relURL }}" as="font" type="font/woff2" crossorigin />
    <link rel="preload" href="{{ "fonts/Newsreader-italic.woff2" | relURL }}" as="font" type="font/woff2" crossorigin />
    <link rel="stylesheet" href="{{ "css/styles.css" | relURL }}" />
    <link rel="icon" type="image/x-icon" href="{{ "favicon.ico" | relURL }}" />
    <link rel="apple-touch-icon" href="{{ "apple-touch-icon.png" | relURL }}" />

    <script>
        (function () {
            try {
                const root = document.documentElement;
                const classes = ["preload"];

                // Default to dark mode if not set in localStorage
                if (localStorage.getItem("darkMode") === null) {
                    localStorage.setItem("darkMode", "enabled");
                }
                
                if (localStorage.getItem("darkMode") === "enabled") {
                    classes.push("dark-mode");
                    root.style.setProperty("--bg-color", "#141413");
                    root.style.setProperty("--text-color", "#f0efea");
                }
                root.classList.add(...classes);

                queueMicrotask(() => {
                    root.classList.add("js-loaded");
                });
            } catch (e) {
                document.documentElement.classList.add(
                    "preload",
                    "js-loaded",
                );
            }
        })();
    </script>

    <script src="https://cdn.usefathom.com/script.js" data-site="VDZFYXIJ" defer></script>
    <script src="{{ "js/darkmode.js" | relURL }}" defer></script>
    <script src="{{ "js/footnotes.js" | relURL }}" defer></script>
</head>

<body>
    {{ partial "header.html" . }}

    <main class="content-wrapper">
        <article class="content-container">
            <h1>{{ .Title }}</h1>
            <h4>{{ .Params.description }}</h4>
            <p class="author-date">
                <time datetime="{{ .Date }}">{{ .Date.Format "January 2, 2006" }}</time>
            </p>

            {{ .Content }}
        </article>
    </main>

    {{ partial "footer.html" . }}

    <script>
        console.log(
            "%cThis is a template clone of Dario Amodei's website. You can find it on my Github: https://github.com/parkerjbeard/parkerjbeard.com",
            "font-family: monospace; font-size: 14px; color: #141413; background-color: #F0EFEA; padding: 5px; border-radius: 5px;",
        );
    </script>
</body>

</html>
